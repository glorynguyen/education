<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ng√†y 12: Async JavaScript - Promises & Async/Await</title>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="../css/variables.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/lesson-style.css">

    <style>
        .timeline-visual {
            background: #f9fafb;
            padding: 30px;
            border-radius: 12px;
            margin: 20px 0;
        }

        .timeline-row {
            display: flex;
            align-items: center;
            margin: 15px 0;
            gap: 15px;
        }

        .timeline-label {
            min-width: 120px;
            font-weight: bold;
            color: #667eea;
        }

        .timeline-bar {
            flex: 1;
            height: 40px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            padding: 0 15px;
            color: white;
            font-weight: bold;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                width: 0;
                opacity: 0;
            }

            to {
                width: 100%;
                opacity: 1;
            }
        }

        .promise-states {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .state-card {
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            color: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .state-pending {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        .state-fulfilled {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        .state-rejected {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }

        .demo-async {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .demo-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .demo-button {
            background: white;
            color: #667eea;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .demo-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .demo-output {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 10px;
            min-height: 100px;
            font-family: monospace;
            line-height: 1.8;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .api-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .api-response {
            background: #1f2937;
            color: #10b981;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            overflow-x: auto;
            margin-top: 15px;
            max-height: 300px;
            overflow-y: auto;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }

        .code-old {
            background: #fee2e2;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #ef4444;
        }

        .code-new {
            background: #dcfce7;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #10b981;
        }

        .error-display {
            background: #fee2e2;
            color: #991b1b;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            display: none;
        }

        .success-display {
            background: #dcfce7;
            color: #166534;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            display: none;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üìÖ Th√°ng 1 - Ng√†y 12</h1>
            <p>Async JavaScript - X·ª≠ l√Ω code b·∫•t ƒë·ªìng b·ªô v·ªõi Promises & Async/Await</p>
        </div>

        <div class="content">
            <a href="../index.html" class="btn"
                style="display: inline-block; text-decoration: none; margin-bottom: 20px;">
                ‚¨ÖÔ∏è Quay l·∫°i L·ªô tr√¨nh
            </a>

            <!-- Section 1: Async l√† g√¨? -->
            <div class="section">
                <div class="section-title">1. Asynchronous (B·∫•t ƒë·ªìng b·ªô) l√† g√¨?</div>
                <p>JavaScript m·∫∑c ƒë·ªãnh ch·∫°y theo ki·ªÉu <strong>synchronous</strong> (ƒë·ªìng b·ªô) - t·ª´ng d√≤ng code ch·∫°y tu·∫ßn
                    t·ª±. Nh∆∞ng m·ªôt s·ªë t√°c v·ª• nh∆∞ <strong>g·ªçi API, ƒë·ªçc file, set timeout</strong> c·∫ßn th·ªùi gian ch·ªù ƒë·ª£i.
                </p>

                <div class="info-box">
                    <strong>üéØ T·∫°i sao c·∫ßn Async?</strong><br>
                    ‚Ä¢ Tr√°nh block code (ch·ªù ƒë·ª£i API xong m·ªõi ch·∫°y ti·∫øp)<br>
                    ‚Ä¢ TƒÉng hi·ªáu su·∫•t - nhi·ªÅu t√°c v·ª• ch·∫°y song song<br>
                    ‚Ä¢ UX t·ªët h∆°n - trang web kh√¥ng b·ªã "ƒë∆°" khi ch·ªù d·ªØ li·ªáu<br>
                    ‚Ä¢ Chu·∫©n b·ªã cho vi·ªác l√†m vi·ªác v·ªõi API trong c√°c b√†i sau
                </div>

                <h3>üìä So s√°nh Sync vs Async</h3>
                <div class="timeline-visual">
                    <h4 style="margin-bottom: 15px;">Synchronous (ƒê·ªìng b·ªô) - Ch·ªù l·∫ßn l∆∞·ª£t</h4>
                    <div class="timeline-row">
                        <div class="timeline-label">Task 1</div>
                        <div class="timeline-bar">Ho√†n th√†nh (2s)</div>
                    </div>
                    <div class="timeline-row">
                        <div class="timeline-label">Task 2</div>
                        <div class="timeline-bar">Ho√†n th√†nh (3s)</div>
                    </div>
                    <div class="timeline-row">
                        <div class="timeline-label">Task 3</div>
                        <div class="timeline-bar">Ho√†n th√†nh (1s)</div>
                    </div>
                    <p style="text-align: center; color: #ef4444; font-weight: bold; margin-top: 10px;">
                        ‚è±Ô∏è T·ªïng th·ªùi gian: 6 gi√¢y
                    </p>
                </div>

                <div class="timeline-visual">
                    <h4 style="margin-bottom: 15px;">Asynchronous (B·∫•t ƒë·ªìng b·ªô) - Ch·∫°y song song</h4>
                    <div class="timeline-row">
                        <div class="timeline-label">Task 1</div>
                        <div class="timeline-bar">Ho√†n th√†nh (2s)</div>
                    </div>
                    <div class="timeline-row">
                        <div class="timeline-label">Task 2</div>
                        <div class="timeline-bar">Ho√†n th√†nh (3s)</div>
                    </div>
                    <div class="timeline-row">
                        <div class="timeline-label">Task 3</div>
                        <div class="timeline-bar" style="max-width: 33%;">Ho√†n th√†nh (1s)</div>
                    </div>
                    <p style="text-align: center; color: #10b981; font-weight: bold; margin-top: 10px;">
                        ‚ö° T·ªïng th·ªùi gian: ~3 gi√¢y (nhanh g·∫•p ƒë√¥i!)
                    </p>
                </div>
            </div>

            <!-- Section 2: Callbacks (C√°ch c≈©) -->
            <div class="section">
                <div class="section-title">2. Callbacks - C√°ch x·ª≠ l√Ω Async truy·ªÅn th·ªëng</div>
                <p>Tr∆∞·ªõc ES6, JavaScript d√πng <strong>callback functions</strong> ƒë·ªÉ x·ª≠ l√Ω async. Nh∆∞ng d·ªÖ g√¢y ra
                    "Callback Hell" (ƒë·ªãa ng·ª•c callback).</p>

                <div class="code-block">
// V√≠ d·ª• callback ƒë∆°n gi·∫£n
function fetchData(callback) {
    setTimeout(() => {
    const data = { name: "John", age: 25 };
        callback(data);
    }, 2000);
}

fetchData((result) => {
    console.log("D·ªØ li·ªáu:", result);
});
                </div>

                <div class="warning-box">
                    <strong>‚ùå Callback Hell (Pyramid of Doom):</strong><br>
                    Khi c√≥ nhi·ªÅu async l·ªìng nhau, code tr·ªü n√™n kh√≥ ƒë·ªçc v√† b·∫£o tr√¨:
                </div>

                <div class="code-block">
getData(function(a) {
    getMoreData(a, function(b) {
        getEvenMoreData(b, function(c) {
            getFinalData(c, function(d) {
            // Qu√° nhi·ªÅu l·ªìng nhau! üòµ
            });
        });
    });
});
                </div>
            </div>

            <!-- Section 3: Promises -->
            <div class="section">
                <div class="section-title">3. Promises - Gi·∫£i ph√°p hi·ªán ƒë·∫°i</div>
                <p>Promise l√† m·ªôt ƒë·ªëi t∆∞·ª£ng ƒë·∫°i di·ªán cho k·∫øt qu·∫£ c·ªßa m·ªôt t√°c v·ª• async trong t∆∞∆°ng lai.</p>

                <h3>üé≠ Ba tr·∫°ng th√°i c·ªßa Promise</h3>
                <div class="promise-states">
                    <div class="state-card state-pending">
                        <h4>‚è≥ Pending</h4>
                        <p>ƒêang ch·ªù k·∫øt qu·∫£</p>
                    </div>
                    <div class="state-card state-fulfilled">
                        <h4>‚úÖ Fulfilled</h4>
                        <p>Th√†nh c√¥ng</p>
                    </div>
                    <div class="state-card state-rejected">
                        <h4>‚ùå Rejected</h4>
                        <p>Th·∫•t b·∫°i</p>
                    </div>
                </div>

                <h3>üìù C√∫ ph√°p Promise</h3>
                <div class="code-block">
// T·∫°o Promise
const myPromise = new Promise((resolve, reject) => {
    // Code async ·ªü ƒë√¢y
    const success = true;

    if (success) {
        resolve("Th√†nh c√¥ng!"); // G·ªçi khi ho√†n th√†nh
    } else {
        reject("L·ªói r·ªìi!"); // G·ªçi khi c√≥ l·ªói
    }
});

// S·ª≠ d·ª•ng Promise
myPromise
.then((result) => {
    console.log(result); // "Th√†nh c√¥ng!"
})
.catch((error) => {
    console.error(error);
})
.finally(() => {
    console.log("Lu√¥n ch·∫°y d√π th√†nh c√¥ng hay th·∫•t b·∫°i");
});
                </div>

                <h3>üîó Promise Chaining (N·ªëi chu·ªói)</h3>
                <div class="code-block">
fetch('https://api.example.com/user')
.then(response => response.json())
.then(data => {
    console.log("User:", data);
    return fetch(`https://api.example.com/posts/${data.id}`);
})
.then(response => response.json())
.then(posts => {
    console.log("Posts:", posts);
})
.catch(error => {
    console.error("L·ªói:", error);
});
                </div>
            </div>

            <!-- Section 4: Async/Await -->
            <div class="section">
                <div class="section-title">4. Async/Await - C√°ch vi·∫øt hi·ªán ƒë·∫°i nh·∫•t</div>
                <p><strong>Async/Await</strong> (ES2017) gi√∫p vi·∫øt code b·∫•t ƒë·ªìng b·ªô gi·ªëng nh∆∞ code ƒë·ªìng b·ªô, d·ªÖ ƒë·ªçc h∆°n
                    Promise chaining.</p>

                <div class="highlight-box">
                    <strong>üí° Quy t·∫Øc:</strong><br>
                    ‚Ä¢ Th√™m <code>async</code> tr∆∞·ªõc function<br>
                    ‚Ä¢ D√πng <code>await</code> tr∆∞·ªõc Promise (ch·ªâ trong async function)<br>
                    ‚Ä¢ Lu√¥n d√πng <code>try...catch</code> ƒë·ªÉ b·∫Øt l·ªói
                </div>

                <div class="comparison-grid">
                    <div class="code-old">
                        <h4 style="color: #991b1b;">‚ùå Promise (d√†i d√≤ng h∆°n)</h4>
                        <div class="code-block">
function getUser() {
    fetch('/api/user')
    .then(res => res.json())
    .then(user => {
        console.log(user);
    })
    .catch(err => {
        console.error(err);
    });
}
                        </div>
                    </div>

                    <div class="code-new">
                        <h4 style="color: #166534;">‚úÖ Async/Await (d·ªÖ ƒë·ªçc)</h4>
                        <div class="code-block">
async function getUser() {
    try {
        const res = await fetch('/api/user');
        const user = await res.json();
        console.log(user);
    } catch (err) {
        console.error(err);
    }
}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 5: Demo th·ª±c h√†nh -->
            <div class="section">
                <div class="section-title">5. üíª Th·ª≠ nghi·ªám Async/Await</div>

                <div class="demo-async">
                    <h3>‚è±Ô∏è M√¥ ph·ªèng t·∫£i d·ªØ li·ªáu</h3>
                    <div class="demo-controls">
                        <button onclick="simulateSync()" class="demo-button">üê¢ ƒê·ªìng b·ªô (Ch·∫≠m)</button>
                        <button onclick="simulateAsync()" class="demo-button">‚ö° B·∫•t ƒë·ªìng b·ªô (Nhanh)</button>
                        <button onclick="fetchRandomUser()" class="demo-button">üë§ Fetch User API</button>
                        <button onclick="clearOutput()" class="demo-button"
                            style="background: #ef4444; color: white;">üóëÔ∏è X√≥a</button>
                    </div>
                    <div id="asyncOutput" class="demo-output">
                        Nh·∫•n c√°c n√∫t ƒë·ªÉ xem demo...
                    </div>
                </div>

                <div class="api-card">
                    <h3>üåê Fetch API th·∫≠t v·ªõi Random User</h3>
                    <p>S·ª≠ d·ª•ng API c√¥ng khai <code>https://randomuser.me/api/</code> ƒë·ªÉ l·∫•y d·ªØ li·ªáu ng∆∞·ªùi d√πng ng·∫´u
                        nhi√™n.</p>
                    <button onclick="fetchAndDisplay()" class="demo-button"
                        style="background: #667eea; color: white; margin-bottom: 15px;">
                        üîÑ L·∫•y ng∆∞·ªùi d√πng m·ªõi
                    </button>
                    <div id="userDisplay"></div>
                    <div id="apiResponse" class="api-response" style="display: none;"></div>
                </div>

                <details style="margin-top: 15px; background: #f9fafb; padding: 15px; border-radius: 8px;">
                    <summary style="cursor: pointer; font-weight: bold; color: #667eea;">üìñ Xem code c·ªßa demo</summary>
                    <div class="code-block" style="margin-top: 10px;">
// M√¥ ph·ªèng task t·ªën th·ªùi gian
function delay(ms, taskName) {
    return new Promise(resolve => {
        setTimeout(() => resolve(taskName), ms);
    });
}

// Demo ƒë·ªìng b·ªô (ch·ªù l·∫ßn l∆∞·ª£t)
async function simulateSync() {
    const output = document.getElementById('asyncOutput');
    output.innerHTML = '<div class="loading-spinner"></div> ƒêang x·ª≠ l√Ω ƒë·ªìng b·ªô...<br>';

    const start = Date.now();

    await delay(2000, 'Task 1');
    output.innerHTML += '‚úÖ Task 1 ho√†n th√†nh (2s)<br>';

    await delay(3000, 'Task 2');
    output.innerHTML += '‚úÖ Task 2 ho√†n th√†nh (3s)<br>';

    await delay(1000, 'Task 3');
    output.innerHTML += '‚úÖ Task 3 ho√†n th√†nh (1s)<br>';

    const end = Date.now();
    output.innerHTML += `<strong>‚è±Ô∏è T·ªïng th·ªùi gian: ${(end - start) / 1000}s</strong>`;
}

// Demo b·∫•t ƒë·ªìng b·ªô (ch·∫°y song song)
async function simulateAsync() {
    const output = document.getElementById('asyncOutput');
    output.innerHTML = '<div class="loading-spinner"></div> ƒêang x·ª≠ l√Ω b·∫•t ƒë·ªìng b·ªô...<br>';

    const start = Date.now();

    const tasks = [
        delay(2000, 'Task 1'),
        delay(3000, 'Task 2'),
        delay(1000, 'Task 3')
    ];

    const results = await Promise.all(tasks);

    results.forEach(task => {
        output.innerHTML += `‚úÖ ${task} ho√†n th√†nh<br>`;
    });

    const end = Date.now();
    output.innerHTML += `<strong>‚ö° T·ªïng th·ªùi gian: ${(end - start) / 1000}s</strong>`;
}

// Fetch API th·∫≠t
async function fetchRandomUser() {
    const output = document.getElementById('asyncOutput');
    output.innerHTML = '<div class="loading-spinner"></div> ƒêang t·∫£i d·ªØ li·ªáu t·ª´ API...';

    try {
        const response = await fetch('https://randomuser.me/api/');
        const data = await response.json();
        const user = data.results[0];

        output.innerHTML = `
        <strong>‚úÖ Fetch th√†nh c√¥ng!</strong><br>
        üë§ T√™n: ${user.name.first} ${user.name.last}<br>
        üìß Email: ${user.email}<br>
        üåç Qu·ªëc gia: ${user.location.country}
        `;
    } catch (error) {
        output.innerHTML = `<strong>‚ùå L·ªói:</strong> ${error.message}`;
    }
}
                    </div>
                </details>
            </div>

            <!-- Section 6: Error Handling -->
            <div class="section">
                <div class="section-title">6. Error Handling (X·ª≠ l√Ω l·ªói)</div>
                <p>Lu√¥n d√πng <code>try...catch</code> ƒë·ªÉ b·∫Øt l·ªói khi l√†m vi·ªác v·ªõi async/await:</p>

                <div class="code-block">
async function fetchData() {
    try {
        const response = await fetch('https://api.example.com/data');

        // Ki·ªÉm tra HTTP status
        if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }

        const data = await response.json();
        return data;

    } catch (error) {
        console.error("L·ªói khi fetch:", error.message);
        // Hi·ªÉn th·ªã th√¥ng b√°o l·ªói cho user
        alert("Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu. Vui l√≤ng th·ª≠ l·∫°i!");
    }
}
                </div>

                <div class="warning-box">
                    <strong>‚ö†Ô∏è L∆∞u √Ω quan tr·ªçng:</strong><br>
                    ‚Ä¢ Kh√¥ng c√≥ <code>try...catch</code> ‚Üí L·ªói s·∫Ω crash app<br>
                    ‚Ä¢ Lu√¥n ki·ªÉm tra <code>response.ok</code> tr∆∞·ªõc khi parse JSON<br>
                    ‚Ä¢ Cung c·∫•p fallback UI khi c√≥ l·ªói
                </div>
            </div>

            <!-- Section 7: Promise.all & Promise.race -->
            <div class="section">
                <div class="section-title">7. Promise.all() & Promise.race()</div>

                <div class="comparison-grid">
                    <div class="method-card">
                        <h4>üîó Promise.all()</h4>
                        <p>Ch·ªù <strong>T·∫§T C·∫¢</strong> Promises ho√†n th√†nh</p>
                        <div class="code-block">
const p1 = fetch('/api/users');
const p2 = fetch('/api/posts');
const p3 = fetch('/api/comments');

const [users, posts, comments] =
await Promise.all([p1, p2, p3]);

// C·∫£ 3 ƒë·ªÅu ho√†n th√†nh m·ªõi ch·∫°y ti·∫øp
                        </div>
                        <div class="warning-box" style="margin-top: 10px;">
                            ‚ö†Ô∏è N·∫øu 1 Promise l·ªói ‚Üí T·∫§T C·∫¢ b·ªã reject
                        </div>
                    </div>

                    <div class="method-card">
                        <h4>üèÅ Promise.race()</h4>
                        <p>L·∫•y k·∫øt qu·∫£ c·ªßa Promise <strong>NHANH NH·∫§T</strong></p>
                        <div class="code-block">
const timeout = new Promise((_, reject) =>
    setTimeout(() => reject('Timeout!'), 5000)
);

const apiCall = fetch('/api/data');

const result = await Promise.race([
    apiCall,
    timeout
]);

// L·∫•y c√°i n√†o xong tr∆∞·ªõc
                        </div>
                        <div class="info-box" style="margin-top: 10px;">
                            üí° H·ªØu √≠ch ƒë·ªÉ set timeout cho API calls
                        </div>
                    </div>
                </div>
            </div>

            <!-- Homework -->
            <div class="section">
                <div class="section-title">üéØ B√†i t·∫≠p v·ªÅ nh√†</div>
                <div class="project-card">
                    <div class="project-header">
                        <div class="project-title">T·∫°o "Weather App" v·ªõi API</div>
                    </div>
                    <p style="margin-top: 10px; line-height: 1.6;">
                        S·ª≠ d·ª•ng API mi·ªÖn ph√≠ <code>https://api.open-meteo.com/v1/forecast</code>:
                    </p>
                    <ul style="margin: 10px 0 10px 20px; color: #4b5563;">
                        <li>Input ƒë·ªÉ nh·∫≠p t·ªça ƒë·ªô (latitude, longitude)</li>
                        <li>Button "L·∫•y th·ªùi ti·∫øt" g·ªçi API b·∫±ng <code>async/await</code></li>
                        <li>Hi·ªÉn th·ªã nhi·ªát ƒë·ªô, ƒë·ªô ·∫©m, t·ªëc ƒë·ªô gi√≥</li>
                        <li>Hi·ªÉn th·ªã loading spinner khi ƒëang fetch</li>
                        <li>X·ª≠ l√Ω l·ªói v·ªõi <code>try...catch</code></li>
                        <li><strong>Bonus:</strong> L∆∞u k·∫øt qu·∫£ v√†o localStorage</li>
                    </ul>
                </div>
            </div>

            <!-- Quiz -->
            <div class="section">
                <div class="section-title">üß† Ki·ªÉm tra ki·∫øn th·ª©c</div>
                <div class="quiz-container">
                    <form id="quizForm">
                        <div class="question-item">
                            <div class="question-text">C√¢u 1: Asynchronous JavaScript gi√∫p g√¨?</div>
                            <div class="options-list">
                                <label class="option-label">
                                    <input type="radio" name="q1" value="wrong"> L√†m code ch·∫°y ch·∫≠m h∆°n
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q1" value="correct"> Tr√°nh block code khi ch·ªù t√°c v·ª• t·ªën
                                    th·ªùi gian
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q1" value="wrong"> Kh√¥ng c√≥ t√°c d·ª•ng g√¨
                                </label>
                            </div>
                        </div>

                        <div class="question-item">
                            <div class="question-text">C√¢u 2: Promise c√≥ bao nhi√™u tr·∫°ng th√°i?</div>
                            <div class="options-list">
                                <label class="option-label">
                                    <input type="radio" name="q2" value="wrong"> 2 (Success, Fail)
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q2" value="correct"> 3 (Pending, Fulfilled, Rejected)
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q2" value="wrong"> 4 (Pending, Loading, Success, Error)
                                </label>
                            </div>
                        </div>

                        <div class="question-item">
                            <div class="question-text">C√¢u 3: ƒê·ªÉ s·ª≠ d·ª•ng <code>await</code>, function ph·∫£i c√≥ t·ª´ kh√≥a
                                g√¨?</div>
                            <div class="options-list">
                                <label class="option-label">
                                    <input type="radio" name="q3" value="wrong"> promise
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q3" value="correct"> async
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q3" value="wrong"> wait
                                </label>
                            </div>
                        </div>

                        <div class="question-item">
                            <div class="question-text">C√¢u 4: <code>Promise.all()</code> s·∫Ω nh∆∞ th·∫ø n√†o n·∫øu 1 Promise b·ªã
                                l·ªói?</div>
                            <div class="options-list">
                                <label class="option-label">
                                    <input type="radio" name="q4" value="wrong"> B·ªè qua Promise l·ªói, ch·ªâ l·∫•y nh·ªØng c√°i
                                    th√†nh c√¥ng
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q4" value="correct"> To√†n b·ªô Promise.all() b·ªã reject
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q4" value="wrong"> Kh√¥ng ·∫£nh h∆∞·ªüng g√¨
                                </label>
                            </div>
                        </div>

                        <div class="question-item">
                            <div class="question-text">C√¢u 5: C√∫ ph√°p n√†o ƒë√∫ng ƒë·ªÉ b·∫Øt l·ªói trong async/await?</div>
                            <div class="options-list">
                                <label class="option-label">
                                    <input type="radio" name="q5" value="wrong"> catch (error) { }
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q5" value="correct"> try { } catch (error) { }
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q5" value="wrong"> .catch(error => { })
                                </label>
                            </div>
                        </div>

                        <button type="button" class="btn" onclick="checkQuiz()">Ki·ªÉm tra ƒë√°p √°n</button>
                    </form>
                    <div id="quiz-feedback"></div>
                </div>
            </div>

            <!-- Footer Actions -->
            <div class="actions">
                <button class="btn" onclick="window.location.href='day11.html'">‚¨ÖÔ∏è Quay l·∫°i ng√†y 11</button>
                <button id="completeBtn" class="btn" style="opacity: 0.5; pointer-events: none;"
                    onclick="completeLesson()">‚úÖ Ho√†n th√†nh b√†i h·ªçc</button>
                <p style="font-size: 0.9em; color: #666; margin-top: 5px;">(H√£y l√†m ƒë√∫ng Quiz ƒë·ªÉ m·ªü kh√≥a n√∫t ho√†n th√†nh)
                </p>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../js/config.js"></script>
    <script src="../js/storage.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/quiz-handler.js"></script>

    <script>
        // Initialize quiz
        initQuiz('day12');

        // Helper function: Delay
        function delay(ms, taskName) {
            return new Promise(resolve => {
                setTimeout(() => resolve(taskName), ms);
            });
        }

        // Demo 1: Synchronous (ch·∫≠m)
        async function simulateSync() {
            const output = document.getElementById('asyncOutput');
            output.innerHTML = '<div class="loading-spinner"></div> ƒêang x·ª≠ l√Ω ƒë·ªìng b·ªô...<br>';

            const start = Date.now();

            await delay(2000, 'Task 1');
            output.innerHTML += '‚úÖ Task 1 ho√†n th√†nh (2s)<br>';

            await delay(3000, 'Task 2');
            output.innerHTML += '‚úÖ Task 2 ho√†n th√†nh (3s)<br>';

            await delay(1000, 'Task 3');
            output.innerHTML += '‚úÖ Task 3 ho√†n th√†nh (1s)<br>';

            const end = Date.now();
            output.innerHTML += `<strong style="color: #fbbf24;">‚è±Ô∏è T·ªïng th·ªùi gian: ${(end - start) / 1000}s (ch·∫≠m)</strong>`;
        }

        // Demo 2: Asynchronous (nhanh)
        async function simulateAsync() {
            const output = document.getElementById('asyncOutput');
            output.innerHTML = '<div class="loading-spinner"></div> ƒêang x·ª≠ l√Ω b·∫•t ƒë·ªìng b·ªô...<br>';

            const start = Date.now();

            // Ch·∫°y song song
            const tasks = [
                delay(2000, 'Task 1'),
                delay(3000, 'Task 2'),
                delay(1000, 'Task 3')
            ];

            const results = await Promise.all(tasks);

            results.forEach(task => {
                output.innerHTML += `‚úÖ ${task} ho√†n th√†nh<br>`;
            });

            const end = Date.now();
            output.innerHTML += `<strong style="color: #10b981;">‚ö° T·ªïng th·ªùi gian: ${(end - start) / 1000}s (nhanh g·∫•p ƒë√¥i!)</strong>`;
        }

        // Demo 3: Fetch API
        async function fetchRandomUser() {
            const output = document.getElementById('asyncOutput');
            output.innerHTML = '<div class="loading-spinner"></div> ƒêang t·∫£i d·ªØ li·ªáu t·ª´ API...';

            try {
                const response = await fetch('https://randomuser.me/api/');

                if (!response.ok) {
                    throw new Error(`HTTP Error: ${response.status}`);
                }

                const data = await response.json();
                const user = data.results[0];

                output.innerHTML = `
                <strong style="color: #10b981;">‚úÖ Fetch th√†nh c√¥ng!</strong><br><br>
                üë§ <strong>T√™n:</strong> ${user.name.first} ${user.name.last}<br>
                üìß <strong>Email:</strong> ${user.email}<br>
                üì± <strong>Phone:</strong> ${user.phone}<br>
                üåç <strong>Qu·ªëc gia:</strong> ${user.location.country}<br>
                üèôÔ∏è <strong>Th√†nh ph·ªë:</strong> ${user.location.city}
            `;
            } catch (error) {
                output.innerHTML = `<strong style="color: #ef4444;">‚ùå L·ªói:</strong> ${error.message}`;
            }
        }

        // Fetch and display with card UI
        async function fetchAndDisplay() {
            const display = document.getElementById('userDisplay');
            const apiResponse = document.getElementById('apiResponse');

            display.innerHTML = '<div class="loading-spinner"></div> ƒêang t·∫£i...';
            apiResponse.style.display = 'none';

            try {
                const response = await fetch('https://randomuser.me/api/');

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();
                const user = data.results[0];

                // Display user card
                display.innerHTML = `
                <div style="display: flex; gap: 20px; align-items: center; padding: 20px; background: #f9fafb; border-radius: 10px;">
                    <img src="${user.picture.large}" alt="Avatar" style="border-radius: 50%; width: 100px; height: 100px;">
                    <div>
                        <h3 style="margin: 0 0 10px 0; color: #1f2937;">${user.name.first} ${user.name.last}</h3>
                        <p style="margin: 5px 0; color: #6b7280;">üìß ${user.email}</p>
                        <p style="margin: 5px 0; color: #6b7280;">üì± ${user.phone}</p>
                        <p style="margin: 5px 0; color: #6b7280;">üåç ${user.location.city}, ${user.location.country}</p>
                    </div>
                </div>
            `;

                // Show JSON response
                apiResponse.style.display = 'block';
                apiResponse.textContent = JSON.stringify(data, null, 2);

            } catch (error) {
                display.innerHTML = `
                <div style="background: #fee2e2; color: #991b1b; padding: 15px; border-radius: 8px;">
                    <strong>‚ùå L·ªói:</strong> ${error.message}
                </div>
            `;
            }
        }

        // Clear output
        function clearOutput() {
            document.getElementById('asyncOutput').innerHTML = 'ƒê√£ x√≥a. Nh·∫•n n√∫t ƒë·ªÉ xem demo...';
        }
    </script>
</body>

</html>