<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ng√†y 9: JavaScript Conditions & Loops</title>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <!-- Styles -->
    <link rel="stylesheet" href="../css/variables.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/lesson-style.css">
    <style>
        .condition-demo {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
        }
        .demo-input {
            padding: 10px;
            border: none;
            border-radius: 6px;
            margin-right: 10px;
            width: 150px;
        }
        .demo-button {
            padding: 10px 20px;
            background: white;
            color: #667eea;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        .demo-result {
            margin-top: 15px;
            padding: 15px;
            background: rgba(255,255,255,0.2);
            border-radius: 8px;
            font-weight: bold;
        }
        .loop-visual {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .loop-item {
            background: #10b981;
            color: white;
            padding: 15px;
            border-radius: 8px;
            min-width: 80px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìÖ Th√°ng 1 - Ng√†y 9</h1>
            <p>ƒêi·ªÅu ki·ªán (Conditions) v√† V√≤ng l·∫∑p (Loops) trong JavaScript</p>
        </div>
        <div class="content">
            <a href="../index.html" class="btn"
                style="display: inline-block; text-decoration: none; margin-bottom: 20px;">
                ‚¨ÖÔ∏è Quay l·∫°i L·ªô tr√¨nh
            </a>
            <!-- Section 1: Conditions -->
            <div class="section">
                <div class="section-title">1. Conditions (ƒêi·ªÅu ki·ªán) - Ki·ªÉm so√°t lu·ªìng code</div>
                <p>Conditions gi√∫p code quy·∫øt ƒë·ªãnh th·ª±c thi ph·∫ßn n√†o d·ª±a tr√™n ƒëi·ªÅu ki·ªán ƒë√∫ng/sai.</p>
                <h3>‚úÖ If/Else/Else If</h3>
                <div class="code-block">
                    if (condition) {
                        // Code n·∫øu ƒë√∫ng
                    } else if (anotherCondition) {
                        // Code n·∫øu ƒëi·ªÅu ki·ªán kh√°c ƒë√∫ng
                    } else {
                        // Code n·∫øu sai h·∫øt
                    }
                </div>
                <h3>‚úÖ Switch Case</h3>
                <div class="code-block">
                    switch (value) {
                        case 'A':
                            // Code cho A
                            break;
                        case 'B':
                            // Code cho B
                            break;
                        default:
                            // M·∫∑c ƒë·ªãnh
                    }
                </div>
            </div>
            <!-- Demo Conditions -->
            <div class="section">
                <div class="section-title">üíª Th·ª≠ nghi·ªám Conditions</div>
                <div class="condition-demo">
                    <h4>üî¢ Ki·ªÉm tra s·ªë ch·∫µn/l·∫ª</h4>
                    <input type="number" id="numberInput" class="demo-input" placeholder="Nh·∫≠p s·ªë...">
                    <button onclick="checkEvenOdd()" class="demo-button">Ki·ªÉm tra</button>
                    <div id="evenOddResult" class="demo-result"></div>
                </div>
                <!-- Code m·∫´u cho th·ª≠ nghi·ªám ch·∫µn/l·∫ª -->
                <h4>Code m·∫´u cho Ki·ªÉm tra s·ªë ch·∫µn/l·∫ª</h4>
                <div class="code-block">
                    function checkEvenOdd() {
                        const input = document.getElementById('numberInput');
                        const resultDiv = document.getElementById('evenOddResult');
                        const num = parseInt(input.value);

                        if (isNaN(num)) {
                            resultDiv.innerText = "‚ùå Vui l√≤ng nh·∫≠p m·ªôt s·ªë h·ª£p l·ªá!";
                            resultDiv.style.color = "#feb2b2";
                            return;
                        }

                        if (num % 2 === 0) {
                            resultDiv.innerText = `‚úÖ S·ªë ${num} l√† s·ªë CH·∫¥N (Even).`;
                        } else {
                            resultDiv.innerText = `‚úÖ S·ªë ${num} l√† s·ªë L·∫∫ (Odd).`;
                        }
                    }
                </div>
                <div class="condition-demo">
                    <h4>üìÖ Ki·ªÉm tra ng√†y trong tu·∫ßn</h4>
                    <select id="daySelect" class="demo-input">
                        <option value="">Ch·ªçn ng√†y...</option>
                        <option value="Monday">Th·ª© 2</option>
                        <option value="Tuesday">Th·ª© 3</option>
                        <option value="Wednesday">Th·ª© 4</option>
                        <option value="Thursday">Th·ª© 5</option>
                        <option value="Friday">Th·ª© 6</option>
                        <option value="Saturday">Th·ª© 7</option>
                        <option value="Sunday">Ch·ªß Nh·∫≠t</option>
                    </select>
                    <button onclick="checkDay()" class="demo-button">Ki·ªÉm tra</button>
                    <div id="dayResult" class="demo-result"></div>
                </div>
                <!-- Code m·∫´u cho th·ª≠ nghi·ªám ng√†y trong tu·∫ßn -->
                <h4>Code m·∫´u cho Ki·ªÉm tra ng√†y trong tu·∫ßn</h4>
                <div class="code-block">
                    function checkDay() {
                        const day = document.getElementById('daySelect').value;
                        const resultDiv = document.getElementById('dayResult');
                        let message = "";

                        if (!day) {
                            resultDiv.innerText = "‚ö†Ô∏è H√£y ch·ªçn m·ªôt ng√†y!";
                            return;
                        }

                        switch (day) {
                            case 'Monday':
                                message = "Th·ª© 2 l√† ng√†y ƒë·∫ßu tu·∫ßn, hƒÉng h√°i l√™n! üí™";
                                break;
                            case 'Friday':
                                message = "Th·ª© 6 r·ªìi, chu·∫©n b·ªã ngh·ªâ ng∆°i th√¥i! ‚òï";
                                break;
                            case 'Saturday':
                            case 'Sunday':
                                message = "Cu·ªëi tu·∫ßn r·ªìi! Qu·∫©y th√¥i! üéâ";
                                break;
                            default:
                                message = "M·ªôt ng√†y l√†m vi·ªác b√¨nh th∆∞·ªùng. C·ªë g·∫Øng nh√©! ‚ú®";
                        }

                        resultDiv.innerText = `K·∫øt qu·∫£: ${message}`;
                    }
                </div>
            </div>
            <!-- Section 2: Loops -->
            <div class="section">
                <div class="section-title">2. Loops (V√≤ng l·∫∑p) - L·∫∑p l·∫°i code</div>
                <h3>‚úÖ For Loop</h3>
                <div class="code-block">
                    for (let i = 0; i < 5; i++) {
                        console.log(i); // 0 1 2 3 4
                    }
                </div>
                <h3>‚úÖ While/Do-While</h3>
                <div class="code-block">
                    let i = 0;
                    while (i < 5) {
                        console.log(i);
                        i++;
                    }
                </div>
            </div>
            <!-- Demo Loops -->
            <div class="section">
                <div class="section-title">üíª Th·ª≠ nghi·ªám Loops</div>
                <div class="condition-demo">
                    <h4>üîÑ T·∫°o danh s√°ch s·ªë t·ª´ 1 ƒë·∫øn N</h4>
                    <input type="number" id="loopInput" class="demo-input" placeholder="Nh·∫≠p N...">
                    <button onclick="generateNumbers()" class="demo-button">T·∫°o</button>
                    <div id="loopResult" class="loop-visual"></div>
                </div>
                <!-- Code m·∫´u cho th·ª≠ nghi·ªám t·∫°o danh s√°ch s·ªë -->
                <h4>Code m·∫´u cho T·∫°o danh s√°ch s·ªë t·ª´ 1 ƒë·∫øn N</h4>
                <div class="code-block">
                    function generateNumbers() {
                        const input = document.getElementById('loopInput');
                        const container = document.getElementById('loopResult');
                        const n = parseInt(input.value);

                        // X√≥a k·∫øt qu·∫£ c≈©
                        container.innerHTML = "";

                        if (isNaN(n) || n <= 0) {
                            container.innerHTML = "<p>Vui l√≤ng nh·∫≠p s·ªë N d∆∞∆°ng!</p>";
                            return;
                        }

                        // Gi·ªõi h·∫°n ƒë·ªÉ tr√°nh l√†m treo tr√¨nh duy·ªát n·∫øu nh·∫≠p s·ªë qu√° l·ªõn
                        const limit = n > 50 ? 50 : n;
                        if (n > 50) alert("ƒê·ªÉ ƒë·∫£m b·∫£o hi·ªáu nƒÉng, h·ªá th·ªëng ch·ªâ hi·ªÉn th·ªã 50 s·ªë ƒë·∫ßu ti√™n.");

                        for (let i = 1; i <= limit; i++) {
                            const item = document.createElement('div');
                            item.className = 'loop-item';
                            item.innerText = i;
                            
                            // Hi·ªáu ·ª©ng xu·∫•t hi·ªán d·∫ßn d·∫ßn (t√πy ch·ªçn)
                            item.style.animation = `fadeIn 0.3s ease forwards ${i * 0.05}s`;
                            
                            container.appendChild(item);
                        }
                    }
                </div>
            </div>
            <!-- B√†i t·∫≠p -->
            <div class="section">
                <div class="section-title">üéØ B√†i t·∫≠p v·ªÅ nh√†</div>
                <div class="project-card">
                    <div class="project-header">
                        <div class="project-title">T·∫°o "FizzBuzz Game"</div>
                    </div>
                    <ul style="margin: 10px 0 10px 20px; color: #4b5563;">
                        <li>L·∫∑p t·ª´ 1 ƒë·∫øn 100</li>
                        <li>N·∫øu chia h·∫øt cho 3: "Fizz"</li>
                        <li>Chia h·∫øt cho 5: "Buzz"</li>
                        <li>Chia h·∫øt cho c·∫£ 3 v√† 5: "FizzBuzz"</li>
                        <li>Bonus: Hi·ªÉn th·ªã tr√™n trang web</li>
                    </ul>
                </div>
            </div>
            <!-- Quiz -->
            <div class="section">
                <div class="section-title">üß† Ki·ªÉm tra ki·∫øn th·ª©c</div>
                <div class="quiz-container">
                    <form id="quizForm">
                        <div class="question-item">
                            <div class="question-text">C√¢u 1: C√∫ ph√°p n√†o ƒë√∫ng cho if statement?</div>
                            <div class="options-list">
                                <label class="option-label"><input type="radio" name="q1" value="correct"> if (condition) { }</label>
                                <label class="option-label"><input type="radio" name="q1" value="wrong"> when (condition) { }</label>
                            </div>
                        </div>
                        <!-- C√¢u 2: For Loop -->
                        <div class="question-item">
                            <div class="question-text">C√¢u 2: C√∫ ph√°p n√†o sau ƒë√¢y l√† v√≤ng l·∫∑p For ƒë√∫ng?</div>
                            <div class="options-list">
                                <label class="option-label"><input type="radio" name="q2" value="wrong"> for (i = 5; i++)</label>
                                <label class="option-label"><input type="radio" name="q2" value="correct"> for (let i = 0; i < 5; i++)</label>
                                <label class="option-label"><input type="radio" name="q2" value="wrong"> for (let i <= 5; i++)</label>
                            </div>
                        </div>

                        <!-- C√¢u 3: Switch Case -->
                        <div class="question-item">
                            <div class="question-text">C√¢u 3: Trong l·ªánh Switch, t·ª´ kh√≥a n√†o d√πng ƒë·ªÉ tho√°t kh·ªèi nh√°nh sau khi th·ª±c hi·ªán xong?</div>
                            <div class="options-list">
                                <label class="option-label"><input type="radio" name="q3" value="wrong"> stop</label>
                                <label class="option-label"><input type="radio" name="q3" value="wrong"> exit</label>
                                <label class="option-label"><input type="radio" name="q3" value="correct"> break</label>
                            </div>
                        </div>

                        <!-- C√¢u 4: While Loop -->
                        <div class="question-item">
                            <div class="question-text">C√¢u 4: V√≤ng l·∫∑p n√†o lu√¥n th·ª±c hi·ªán code √≠t nh·∫•t M·ªòT L·∫¶N tr∆∞·ªõc khi ki·ªÉm tra ƒëi·ªÅu ki·ªán?</div>
                            <div class="options-list">
                                <label class="option-label"><input type="radio" name="q4" value="wrong"> while loop</label>
                                <label class="option-label"><input type="radio" name="q4" value="correct"> do...while loop</label>
                                <label class="option-label"><input type="radio" name="q4" value="wrong"> for loop</label>
                            </div>
                        </div>

                        <!-- C√¢u 5: To√°n t·ª≠ logic trong ƒëi·ªÅu ki·ªán -->
                        <div class="question-item">
                            <div class="question-text">C√¢u 5: ƒê·ªÉ ki·ªÉm tra hai ƒëi·ªÅu ki·ªán c√πng l√∫c (ƒêi·ªÅu ki·ªán A V√Ä ƒêi·ªÅu ki·ªán B), ta d√πng k√Ω hi·ªáu n√†o?</div>
                            <div class="options-list">
                                <label class="option-label"><input type="radio" name="q5" value="correct"> &amp;&amp;</label>
                                <label class="option-label"><input type="radio" name="q5" value="wrong"> ||</label>
                                <label class="option-label"><input type="radio" name="q5" value="wrong"> !!</label>
                            </div>
                        </div>
                        <button type="button" class="btn" onclick="checkQuiz()">Ki·ªÉm tra</button>
                    </form>
                    <div id="quiz-feedback"></div>
                </div>
            </div>
            <!-- Actions -->
            <div class="actions">
                <button class="btn" onclick="window.location.href='day8.html'">‚¨ÖÔ∏è Ng√†y 8</button>
                <button id="completeBtn" class="btn" style="opacity: 0.5; pointer-events: none;" onclick="completeLesson()">‚úÖ Ho√†n th√†nh</button>
            </div>
        </div>
    </div>
    <script src="../js/config.js"></script>
    <script src="../js/storage.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/quiz-handler.js"></script>
    <script>
        // Kh·ªüi t·∫°o Quiz (gi·∫£ ƒë·ªãnh script quiz-handler.js ƒë√£ s·∫µn s√†ng)
        if (typeof initQuiz === 'function') {
            initQuiz('day9');
        }

        /** 
         * 1. KI·ªÇM TRA CH·∫¥N L·∫∫ (S·ª≠ d·ª•ng If/Else)
         */
        function checkEvenOdd() {
            const input = document.getElementById('numberInput');
            const resultDiv = document.getElementById('evenOddResult');
            const num = parseInt(input.value);

            if (isNaN(num)) {
                resultDiv.innerText = "‚ùå Vui l√≤ng nh·∫≠p m·ªôt s·ªë h·ª£p l·ªá!";
                resultDiv.style.color = "#feb2b2";
                return;
            }

            if (num % 2 === 0) {
                resultDiv.innerText = `‚úÖ S·ªë ${num} l√† s·ªë CH·∫¥N (Even).`;
            } else {
                resultDiv.innerText = `‚úÖ S·ªë ${num} l√† s·ªë L·∫∫ (Odd).`;
            }
            
            checkInteraction(); // Ki·ªÉm tra ƒë·ªÉ m·ªü kh√≥a n√∫t Ho√†n th√†nh
        }

        /**
         * 2. KI·ªÇM TRA NG√ÄY TRONG TU·∫¶N (S·ª≠ d·ª•ng Switch Case)
         */
        function checkDay() {
            const day = document.getElementById('daySelect').value;
            const resultDiv = document.getElementById('dayResult');
            let message = "";

            if (!day) {
                resultDiv.innerText = "‚ö†Ô∏è H√£y ch·ªçn m·ªôt ng√†y!";
                return;
            }

            switch (day) {
                case 'Monday':
                    message = "Th·ª© 2 l√† ng√†y ƒë·∫ßu tu·∫ßn, hƒÉng h√°i l√™n! üí™";
                    break;
                case 'Friday':
                    message = "Th·ª© 6 r·ªìi, chu·∫©n b·ªã ngh·ªâ ng∆°i th√¥i! ‚òï";
                    break;
                case 'Saturday':
                case 'Sunday':
                    message = "Cu·ªëi tu·∫ßn r·ªìi! Qu·∫©y th√¥i! üéâ";
                    break;
                default:
                    message = "M·ªôt ng√†y l√†m vi·ªác b√¨nh th∆∞·ªùng. C·ªë g·∫Øng nh√©! ‚ú®";
            }

            resultDiv.innerText = `K·∫øt qu·∫£: ${message}`;
            checkInteraction();
        }

        /**
         * 3. T·∫†O DANH S√ÅCH S·ªê (S·ª≠ d·ª•ng V√≤ng l·∫∑p For)
         */
        function generateNumbers() {
            const input = document.getElementById('loopInput');
            const container = document.getElementById('loopResult');
            const n = parseInt(input.value);

            // X√≥a k·∫øt qu·∫£ c≈©
            container.innerHTML = "";

            if (isNaN(n) || n <= 0) {
                container.innerHTML = "<p>Vui l√≤ng nh·∫≠p s·ªë N d∆∞∆°ng!</p>";
                return;
            }

            // Gi·ªõi h·∫°n ƒë·ªÉ tr√°nh l√†m treo tr√¨nh duy·ªát n·∫øu nh·∫≠p s·ªë qu√° l·ªõn
            const limit = n > 50 ? 50 : n;
            if (n > 50) alert("ƒê·ªÉ ƒë·∫£m b·∫£o hi·ªáu nƒÉng, h·ªá th·ªëng ch·ªâ hi·ªÉn th·ªã 50 s·ªë ƒë·∫ßu ti√™n.");

            for (let i = 1; i <= limit; i++) {
                const item = document.createElement('div');
                item.className = 'loop-item';
                item.innerText = i;
                
                // Hi·ªáu ·ª©ng xu·∫•t hi·ªán d·∫ßn d·∫ßn (t√πy ch·ªçn)
                item.style.animation = `fadeIn 0.3s ease forwards ${i * 0.05}s`;
                
                container.appendChild(item);
            }
            
            checkInteraction();
        }

        /**
         * LOGIC HO√ÄN TH√ÄNH B√ÄI H·ªåC
         */
        let interactions = {
            checkedEven: false,
            checkedDay: false,
            checkedLoop: false
        };

        function checkInteraction() {
            // ƒê√°nh d·∫•u ng∆∞·ªùi d√πng ƒë√£ th·ª≠ c√°c t√≠nh nƒÉng
            const numInput = document.getElementById('numberInput').value;
            const daySelect = document.getElementById('daySelect').value;
            const loopInput = document.getElementById('loopInput').value;

            if (numInput) interactions.checkedEven = true;
            if (daySelect) interactions.checkedDay = true;
            if (loopInput) interactions.checkedLoop = true;

            // N·∫øu ƒë√£ th·ª≠ √≠t nh·∫•t 2 demo, cho ph√©p b·∫•m Ho√†n th√†nh
            if (interactions.checkedEven && interactions.checkedDay || interactions.checkedLoop) {
                const btn = document.getElementById('completeBtn');
                btn.style.opacity = "1";
                btn.style.pointerEvents = "auto";
                btn.classList.add('btn-success'); // Gi·∫£ s·ª≠ b·∫°n c√≥ class n√†y
            }
        }

        async function completeLesson() {
            try {
                // G·ªçi h√†m t·ª´ storage.js ƒë·ªÉ l∆∞u ti·∫øn ƒë·ªô v√†o Firebase/LocalStorage
                if (typeof markLessonComplete === 'function') {
                    await markLessonComplete('day9');
                    alert('Ch√∫c m·ª´ng! B·∫°n ƒë√£ ho√†n th√†nh b√†i h·ªçc v·ªÅ ƒêi·ªÅu ki·ªán v√† V√≤ng l·∫∑p. üèÜ');
                    window.location.href = '../index.html';
                } else {
                    alert('H·ªá th·ªëng l∆∞u tr·ªØ ch∆∞a s·∫µn s√†ng, nh∆∞ng b·∫°n ƒë√£ l√†m r·∫•t t·ªët!');
                }
            } catch (error) {
                console.error("L·ªói khi l∆∞u ti·∫øn ƒë·ªô:", error);
            }
        }

        // Th√™m CSS animation cho ƒë·∫πp
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(10px); }
                to { opacity: 1; transform: translateY(0); }
            }
            .btn-success {
                background-color: #10b981 !important;
                box-shadow: 0 4px 14px rgba(16, 185, 129, 0.4);
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>