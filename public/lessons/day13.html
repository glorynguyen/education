<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ng√†y 13: JavaScript Fetch API & Working with Real APIs</title>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="../css/variables.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/lesson-style.css">

    <style>
        .api-flow {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }

        .flow-steps {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin-top: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .flow-step {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 10px;
            min-width: 150px;
            backdrop-filter: blur(10px);
        }

        .flow-arrow {
            font-size: 2em;
            margin: 0 10px;
        }

        .demo-api {
            background: #f9fafb;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
        }

        .api-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .api-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .api-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .api-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(102, 126, 234, 0.3);
            border-radius: 50%;
            border-top-color: #667eea;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .data-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #667eea;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }

        .data-card:hover {
            transform: translateX(5px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .data-card img {
            max-width: 100%;
            border-radius: 8px;
            margin-top: 10px;
        }

        .error-message {
            background: #fee2e2;
            color: #991b1b;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #ef4444;
        }

        .success-message {
            background: #dcfce7;
            color: #166534;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #10b981;
        }

        .api-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .http-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .method-badge {
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            color: white;
        }

        .method-get {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        .method-post {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        }

        .method-put {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        .method-delete {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }

        .json-viewer {
            background: #1f2937;
            color: #10b981;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Consolas', monospace;
            overflow-x: auto;
            margin: 15px 0;
            font-size: 0.9em;
            line-height: 1.6;
        }

        #weatherData,
        #userData,
        #jokeData {
            min-height: 100px;
        }

        .weather-icon {
            font-size: 3em;
            margin: 10px 0;
        }

        .user-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 3px solid #667eea;
        }

        .pagination {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .pagination button {
            padding: 10px 20px;
            border: none;
            background: #667eea;
            color: white;
            border-radius: 8px;
            cursor: pointer;
        }

        .pagination button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üìÖ Th√°ng 1 - Ng√†y 13</h1>
            <p>Fetch API & Working with Real APIs - K·∫øt n·ªëi v·ªõi th·∫ø gi·ªõi d·ªØ li·ªáu</p>
        </div>

        <div class="content">
            <a href="../index.html" class="btn"
                style="display: inline-block; text-decoration: none; margin-bottom: 20px;">
                ‚¨ÖÔ∏è Quay l·∫°i L·ªô tr√¨nh
            </a>

            <!-- Section 1: API l√† g√¨? -->
            <div class="section">
                <div class="section-title">1. API (Application Programming Interface) l√† g√¨?</div>
                <p>API l√† c·∫ßu n·ªëi gi√∫p c√°c ·ª©ng d·ª•ng giao ti·∫øp v·ªõi nhau. N√≥ cho ph√©p frontend (website) l·∫•y d·ªØ li·ªáu t·ª´
                    server m√† kh√¥ng c·∫ßn reload trang.</p>

                <div class="info-box">
                    <strong>üéØ T·∫°i sao c·∫ßn h·ªçc API?</strong><br>
                    ‚Ä¢ L·∫•y d·ªØ li·ªáu th·ªùi ti·∫øt, tin t·ª©c, gi√° ch·ª©ng kho√°n...<br>
                    ‚Ä¢ ƒêƒÉng nh·∫≠p b·∫±ng Google, Facebook<br>
                    ‚Ä¢ Thanh to√°n online, g·ª≠i email<br>
                    ‚Ä¢ M·ªçi trang web hi·ªán ƒë·∫°i ƒë·ªÅu d√πng API!
                </div>

                <div class="api-flow">
                    <h3>üîÑ Lu·ªìng ho·∫°t ƒë·ªông c·ªßa API</h3>
                    <div class="flow-steps">
                        <div class="flow-step">
                            <h4>1Ô∏è‚É£ Frontend</h4>
                            <p>G·ª≠i y√™u c·∫ßu</p>
                        </div>
                        <span class="flow-arrow">‚Üí</span>
                        <div class="flow-step">
                            <h4>2Ô∏è‚É£ API Server</h4>
                            <p>X·ª≠ l√Ω & L·∫•y data</p>
                        </div>
                        <span class="flow-arrow">‚Üí</span>
                        <div class="flow-step">
                            <h4>3Ô∏è‚É£ Response</h4>
                            <p>Tr·∫£ v·ªÅ JSON</p>
                        </div>
                        <span class="flow-arrow">‚Üí</span>
                        <div class="flow-step">
                            <h4>4Ô∏è‚É£ Frontend</h4>
                            <p>Hi·ªÉn th·ªã data</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 2: HTTP Methods -->
            <div class="section">
                <div class="section-title">2. HTTP Methods (Ph∆∞∆°ng th·ª©c HTTP)</div>
                <p>C√°c ph∆∞∆°ng th·ª©c ph·ªï bi·∫øn khi l√†m vi·ªác v·ªõi API:</p>

                <div class="http-methods">
                    <div class="method-badge method-get">
                        <h4>GET</h4>
                        <p>L·∫•y d·ªØ li·ªáu</p>
                    </div>
                    <div class="method-badge method-post">
                        <h4>POST</h4>
                        <p>T·∫°o m·ªõi</p>
                    </div>
                    <div class="method-badge method-put">
                        <h4>PUT</h4>
                        <p>C·∫≠p nh·∫≠t</p>
                    </div>
                    <div class="method-badge method-delete">
                        <h4>DELETE</h4>
                        <p>X√≥a</p>
                    </div>
                </div>
            </div>

            <!-- Section 3: Fetch API Basic -->
            <div class="section">
                <div class="section-title">3. Fetch API - C√°ch g·ªçi API trong JavaScript</div>
                <p>Fetch API l√† c√°ch hi·ªán ƒë·∫°i nh·∫•t ƒë·ªÉ g·ª≠i HTTP request t·ª´ JavaScript.</p>

                <h3>‚úÖ C√∫ ph√°p c∆° b·∫£n</h3>
                <div class="code-block">
                    <pre><code>// GET request ƒë∆°n gi·∫£n
fetch('https://api.example.com/data')
    .then(response => response.json())
    .then(data => {
        console.log(data);
    })
    .catch(error => {
        console.error('L·ªói:', error);
    });</code></pre>
                </div>


                <h3>‚úÖ V·ªõi Async/Await (Khuy·∫øn kh√≠ch)</h3>
                <div class="code-block">
                    <pre><code>async function fetchData() {
    try {
        const response = await fetch('https://api.example.com/data');

        // Ki·ªÉm tra response c√≥ th√†nh c√¥ng kh√¥ng
        if (!response.ok) {
            throw new Error(`HTTP Error: ${response.status}`);
        }

        const data = await response.json();
        console.log(data);

    } catch (error) {
        console.error('L·ªói:', error);
    }
}

fetchData();</code></pre>
                </div>

                <div class="warning-box">
                    <strong>‚ö†Ô∏è L∆∞u √Ω quan tr·ªçng:</strong><br>
                    ‚Ä¢ Lu√¥n d√πng <code>try...catch</code> ƒë·ªÉ b·∫Øt l·ªói<br>
                    ‚Ä¢ Ki·ªÉm tra <code>response.ok</code> tr∆∞·ªõc khi parse JSON<br>
                    ‚Ä¢ API c√≥ th·ªÉ tr·∫£ v·ªÅ l·ªói 404, 500... c·∫ßn x·ª≠ l√Ω<br>
                    ‚Ä¢ M·ªôt s·ªë API y√™u c·∫ßu API Key (ƒëƒÉng k√Ω mi·ªÖn ph√≠)
                </div>
            </div>

            <!-- Section 4: Demo v·ªõi API th·ª±c t·∫ø -->
            <div class="section">
                <div class="section-title">4. üíª Th·ª≠ nghi·ªám v·ªõi API th·ª±c t·∫ø</div>

                <!-- Demo 1: Random User API -->
                <div class="demo-api">
                    <h3>üë§ Demo 1: Random User Generator</h3>
                    <p>API: <code>https://randomuser.me/api/</code></p>
                    <div class="api-controls">
                        <button onclick="fetchRandomUser()" class="api-button">üîÑ L·∫•y ng∆∞·ªùi d√πng ng·∫´u nhi√™n</button>
                    </div>
                    <div id="userData"></div>
                </div>

                <!-- Demo 2: Weather API -->
                <div class="demo-api">
                    <h3>üå§Ô∏è Demo 2: Weather API</h3>
                    <p>API: <code>https://api.open-meteo.com/v1/forecast</code></p>
                    <div class="api-controls">
                        <input type="text" id="latitude" placeholder="Latitude (VD: 21.0285)"
                            style="padding: 10px; border-radius: 8px; border: 1px solid #e5e7eb;">
                        <input type="text" id="longitude" placeholder="Longitude (VD: 105.8542)"
                            style="padding: 10px; border-radius: 8px; border: 1px solid #e5e7eb;">
                        <button onclick="fetchWeather()" class="api-button">üå°Ô∏è Xem th·ªùi ti·∫øt</button>
                    </div>
                    <div id="weatherData"></div>
                </div>

                <!-- Demo 3: Joke API -->
                <div class="demo-api">
                    <h3>üòÇ Demo 3: Random Joke API</h3>
                    <p>API: <code>https://official-joke-api.appspot.com/random_joke</code></p>
                    <div class="api-controls">
                        <button onclick="fetchJoke()" class="api-button">üé≠ L·∫•y joke ng·∫´u nhi√™n</button>
                    </div>
                    <div id="jokeData"></div>
                </div>

                <details style="margin-top: 20px; background: #f9fafb; padding: 15px; border-radius: 8px;">
                    <summary style="cursor: pointer; font-weight: bold; color: #667eea;">üìñ Xem code c·ªßa c√°c demo
                    </summary>
                    <style>
                    </style>

                    <div class="code-block" style="margin-top: 10px;">
                        <pre><code>// Demo 1: Random User
async function fetchRandomUser() {
    const container = document.getElementById('userData');
    container.innerHTML = '&lt;div class="loading"&gt;&lt;/div&gt; ƒêang t·∫£i...';

    try {
        const response = await fetch('https://randomuser.me/api/');

        if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
        }

        const data = await response.json();
        const user = data.results[0];

        container.innerHTML = `
        &lt;div class="data-card"&gt;
            &lt;img src="${user.picture.large}" class="user-avatar" alt="Avatar"&gt;
            &lt;h3&gt;${user.name.first} ${user.name.last}&lt;/h3&gt;
            &lt;p&gt;&lt;strong&gt;Email:&lt;/strong&gt; ${user.email}&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;Phone:&lt;/strong&gt; ${user.phone}&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;Location:&lt;/strong&gt; ${user.location.city}, ${user.location.country}&lt;/p&gt;
        &lt;/div&gt;
        `;
    } catch (error) {
        container.innerHTML = `
        &lt;div class="error-message"&gt;
            &lt;strong&gt;‚ùå L·ªói:&lt;/strong&gt; ${error.message}
        &lt;/div&gt;
        `;
    }
}

// Demo 2: Weather
async function fetchWeather() {
    const lat = document.getElementById('latitude').value.trim();
    const lon = document.getElementById('longitude').value.trim();
    const container = document.getElementById('weatherData');

    if (!lat || !lon) {
        container.innerHTML = '&lt;div class="error-message"&gt;Vui l√≤ng nh·∫≠p t·ªça ƒë·ªô!&lt;/div&gt;';
        return;
    }

    container.innerHTML = '&lt;div class="loading"&gt;&lt;/div&gt; ƒêang t·∫£i th·ªùi ti·∫øt...';

    try {
        const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&amp;longitude=${lon}&amp;current_weather=true`;
        const response = await fetch(url);

        if (!response.ok) throw new Error('Kh√¥ng th·ªÉ l·∫•y d·ªØ li·ªáu th·ªùi ti·∫øt');

        const data = await response.json();
        const weather = data.current_weather;

        container.innerHTML = `
        &lt;div class="data-card"&gt;
            &lt;div class="weather-icon"&gt;üå°Ô∏è&lt;/div&gt;
            &lt;h3&gt;Th·ªùi ti·∫øt hi·ªán t·∫°i&lt;/h3&gt;
            &lt;p&gt;&lt;strong&gt;Nhi·ªát ƒë·ªô:&lt;/strong&gt; ${weather.temperature}¬∞C&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;T·ªëc ƒë·ªô gi√≥:&lt;/strong&gt; ${weather.windspeed} km/h&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;H∆∞·ªõng gi√≥:&lt;/strong&gt; ${weather.winddirection}¬∞&lt;/p&gt;
        &lt;/div&gt;
        `;
    } catch (error) {
        container.innerHTML = `
        &lt;div class="error-message"&gt;
            &lt;strong&gt;‚ùå L·ªói:&lt;/strong&gt; ${error.message}
        &lt;/div&gt;
        `;
    }
}

// Demo 3: Random Joke
async function fetchJoke() {
    const container = document.getElementById('jokeData');
    container.innerHTML = '&lt;div class="loading"&gt;&lt;/div&gt; ƒêang t·∫£i joke...';

    try {
        const response = await fetch('https://official-joke-api.appspot.com/random_joke');

        if (!response.ok) throw new Error('Kh√¥ng th·ªÉ l·∫•y joke');

        const joke = await response.json();

        container.innerHTML = `
        &lt;div class="data-card"&gt;
            &lt;h3&gt;üòÇ ${joke.type.toUpperCase()}&lt;/h3&gt;
            &lt;p&gt;&lt;strong&gt;Setup:&lt;/strong&gt; ${joke.setup}&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;Punchline:&lt;/strong&gt; ${joke.punchline}&lt;/p&gt;
        &lt;/div&gt;
        `;
    } catch (error) {
        container.innerHTML = `
        &lt;div class="error-message"&gt;
            &lt;strong&gt;‚ùå L·ªói:&lt;/strong&gt; ${error.message}
        &lt;/div&gt;
        `;
    }
}</code></pre>
                    </div>
                </details>
            </div>

            <!-- Section 5: POST Request -->
            <div class="section">
                <div class="section-title">5. POST Request - G·ª≠i d·ªØ li·ªáu l√™n server</div>
                <p>POST request d√πng ƒë·ªÉ t·∫°o d·ªØ li·ªáu m·ªõi (ƒëƒÉng k√Ω user, t·∫°o b√†i post...)</p>

                <div class="code-block">
                    <pre><code>async function createPost() {
    const newPost = {
        title: 'B√†i vi·∫øt m·ªõi',
        body: 'N·ªôi dung b√†i vi·∫øt',
        userId: 1
    };

    try {
        const response = await fetch('https://jsonplaceholder.typicode.com/posts', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(newPost)
        });

        if (!response.ok) {
            throw new Error('Kh√¥ng th·ªÉ t·∫°o b√†i vi·∫øt');
        }

        const data = await response.json();
        console.log('B√†i vi·∫øt ƒë√£ t·∫°o:', data);

    } catch (error) {
        console.error('L·ªói:', error);
    }
}</code></pre>
                </div>
            </div>

            <!-- Section 6: Error Handling -->
            <div class="section">
                <div class="section-title">6. Error Handling Best Practices</div>

                <div class="code-block">
                    <pre><code>async function fetchWithErrorHandling(url) {
    try {
        // 1. G·ª≠i request
        const response = await fetch(url);

        // 2. Ki·ªÉm tra HTTP status
        if (!response.ok) {
            throw new Error(`HTTP Error: ${response.status} - ${response.statusText}`);
        }

        // 3. Parse JSON
        const data = await response.json();
        return data;

    } catch (error) {
        // 4. X·ª≠ l√Ω c√°c lo·∫°i l·ªói kh√°c nhau
        if (error instanceof TypeError) {
            console.error('L·ªói m·∫°ng:', error.message);
        } else if (error.message.includes('HTTP')) {
            console.error('L·ªói server:', error.message);
        } else {
            console.error('L·ªói kh√°c:', error.message);
        }

        // 5. Hi·ªÉn th·ªã th√¥ng b√°o cho user
        alert('C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i!');

        return null;
    }
}</code></pre>
                </div>
            </div>

            <!-- Section 7: API v·ªõi Headers & Authentication -->
            <div class="section">
                <div class="section-title">7. API v·ªõi Headers & Authentication</div>
                <p>Nhi·ªÅu API y√™u c·∫ßu API Key ho·∫∑c Token ƒë·ªÉ x√°c th·ª±c:</p>

                <div class="code-block">
                    <pre><code>async function fetchWithAuth() {
    const API_KEY = 'your_api_key_here'; // L·∫•y t·ª´ trang web API

    try {
        const response = await fetch('https://api.example.com/data', {
            method: 'GET',
            headers: {
                'Authorization': `Bearer ${API_KEY}`,
                'Content-Type': 'application/json'
            }
        });

        if (!response.ok) {
            throw new Error('Authentication failed');
        }

        const data = await response.json();
        return data;

    } catch (error) {
        console.error('Error:', error);
    }
}</code></pre>
                </div>

                <div class="info-box">
                    <strong>üîë C√°c c√°ch x√°c th·ª±c ph·ªï bi·∫øn:</strong><br>
                    ‚Ä¢ <strong>API Key:</strong> ƒê∆°n gi·∫£n, g·ª≠i qua query param ho·∫∑c header<br>
                    ‚Ä¢ <strong>Bearer Token:</strong> JWT token, th∆∞·ªùng d√πng cho OAuth<br>
                    ‚Ä¢ <strong>Basic Auth:</strong> Username + Password (√≠t d√πng)<br>
                    ‚Ä¢ <strong>OAuth 2.0:</strong> ƒêƒÉng nh·∫≠p qua Google, Facebook...
                </div>
            </div>

            <!-- Homework -->
            <div class="section">
                <div class="section-title">üéØ B√†i t·∫≠p v·ªÅ nh√†</div>
                <div class="project-card">
                    <div class="project-header">
                        <div class="project-title">T·∫°o "Movie Search App" v·ªõi TMDB API</div>
                    </div>
                    <p style="margin-top: 10px; line-height: 1.6;">
                        T·∫°o ·ª©ng d·ª•ng t√¨m ki·∫øm phim s·ª≠ d·ª•ng The Movie Database API:
                    </p>
                    <ul style="margin: 10px 0 10px 20px; color: #4b5563;">
                        <li>ƒêƒÉng k√Ω mi·ªÖn ph√≠ t·∫°i <a href="https://www.themoviedb.org/settings/api" target="_blank">TMDB
                                API</a> ƒë·ªÉ l·∫•y API Key</li>
                        <li>T·∫°o input ƒë·ªÉ ng∆∞·ªùi d√πng nh·∫≠p t√™n phim</li>
                        <li>G·ªçi API: <code>https://api.themoviedb.org/3/search/movie</code></li>
                        <li>Hi·ªÉn th·ªã danh s√°ch phim v·ªõi poster, t√™n, rating</li>
                        <li>Th√™m loading spinner khi ƒëang fetch</li>
                        <li>X·ª≠ l√Ω l·ªói khi kh√¥ng t√¨m th·∫•y ho·∫∑c API l·ªói</li>
                        <li><strong>Bonus:</strong> Th√™m pagination (trang tr∆∞·ªõc/sau)</li>
                        <li><strong>Super Bonus:</strong> Click v√†o phim ƒë·ªÉ xem chi ti·∫øt</li>
                    </ul>
                    <p style="margin-top: 10px; color: #6b7280;">
                        <strong>G·ª£i √Ω:</strong> S·ª≠ d·ª•ng async/await, try/catch, v√† querySelector ƒë·ªÉ thao t√°c DOM
                    </p>
                </div>
            </div>

            <!-- Free APIs List -->
            <div class="section">
                <div class="section-title">üåê Danh s√°ch API mi·ªÖn ph√≠ ƒë·ªÉ th·ª±c h√†nh</div>

                <div class="api-grid">
                    <div class="data-card">
                        <h4>üé¨ TMDB (Movies)</h4>
                        <p>Th√¥ng tin phim, TV shows</p>
                        <a href="https://www.themoviedb.org/settings/api" target="_blank">‚Üí L·∫•y API Key</a>
                    </div>

                    <div class="data-card">
                        <h4>üå§Ô∏è OpenWeather</h4>
                        <p>Th·ªùi ti·∫øt th·∫ø gi·ªõi</p>
                        <a href="https://openweathermap.org/api" target="_blank">‚Üí L·∫•y API Key</a>
                    </div>

                    <div class="data-card">
                        <h4>üì∞ News API</h4>
                        <p>Tin t·ª©c to√†n c·∫ßu</p>
                        <a href="https://newsapi.org/" target="_blank">‚Üí L·∫•y API Key</a>
                    </div>

                    <div class="data-card">
                        <h4>üë§ Random User</h4>
                        <p>D·ªØ li·ªáu user gi·∫£ l·∫≠p</p>
                        <a href="https://randomuser.me/" target="_blank">‚Üí Kh√¥ng c·∫ßn Key</a>
                    </div>

                    <div class="data-card">
                        <h4>üê± Cat Facts</h4>
                        <p>S·ª± th·∫≠t v·ªÅ m√®o</p>
                        <a href="https://catfact.ninja/" target="_blank">‚Üí Kh√¥ng c·∫ßn Key</a>
                    </div>

                    <div class="data-card">
                        <h4>üéÆ PokeAPI</h4>
                        <p>Th√¥ng tin Pokemon</p>
                        <a href="https://pokeapi.co/" target="_blank">‚Üí Kh√¥ng c·∫ßn Key</a>
                    </div>
                </div>
            </div>

            <!-- Quiz -->
            <div class="section">
                <div class="section-title">üß† Ki·ªÉm tra ki·∫øn th·ª©c</div>
                <div class="quiz-container">
                    <form id="quizForm">
                        <!-- Question 1 -->
                        <div class="question-item">
                            <div class="question-text">C√¢u 1: API l√† vi·∫øt t·∫Øt c·ªßa g√¨?</div>
                            <div class="options-list">
                                <label class="option-label">
                                    <input type="radio" name="q1" value="wrong"> Advanced Programming Interface
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q1" value="correct"> Application Programming Interface
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q1" value="wrong"> Automated Program Integration
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q1" value="wrong"> Application Process Integration
                                </label>
                            </div>
                        </div>

                        <!-- Question 2 -->
                        <div class="question-item">
                            <div class="question-text">C√¢u 2: Ph∆∞∆°ng th·ª©c HTTP n√†o d√πng ƒë·ªÉ L·∫§Y d·ªØ li·ªáu t·ª´ server?</div>
                            <div class="options-list">
                                <label class="option-label">
                                    <input type="radio" name="q2" value="correct"> GET
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q2" value="wrong"> POST
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q2" value="wrong"> DELETE
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q2" value="wrong"> PUT
                                </label>
                            </div>
                        </div>

                        <!-- Question 3 -->
                        <div class="question-item">
                            <div class="question-text">C√¢u 3: Ph∆∞∆°ng th·ª©c n√†o chuy·ªÉn ƒë·ªïi response th√†nh JSON?</div>
                            <div class="options-list">
                                <label class="option-label">
                                    <input type="radio" name="q3" value="wrong"> response.parse()
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q3" value="correct"> response.json()
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q3" value="wrong"> response.toJSON()
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q3" value="wrong"> JSON.stringify(response)
                                </label>
                            </div>
                        </div>

                        <!-- Question 4 -->
                        <div class="question-item">
                            <div class="question-text">C√¢u 4: T·∫°i sao c·∫ßn ki·ªÉm tra <code>response.ok</code> tr∆∞·ªõc khi
                                parse JSON?</div>
                            <div class="options-list">
                                <label class="option-label">
                                    <input type="radio" name="q4" value="wrong"> ƒê·ªÉ l√†m code ch·∫°y nhanh h∆°n
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q4" value="correct"> ƒê·ªÉ b·∫Øt l·ªói HTTP (404, 500...) tr∆∞·ªõc
                                    khi parse
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q4" value="wrong"> ƒê·ªÉ ti·∫øt ki·ªám b·ªô nh·ªõ RAM
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q4" value="wrong"> ƒê·ªÉ t·ª± ƒë·ªông ƒë·ªãnh d·∫°ng l·∫°i d·ªØ li·ªáu HTML
                                </label>
                            </div>
                        </div>

                        <!-- Question 5 -->
                        <div class="question-item">
                            <div class="question-text">C√¢u 5: T·ª´ kh√≥a `await` ch·ªâ c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng b√™n trong lo·∫°i h√†m
                                n√†o?</div>
                            <div class="options-list">
                                <label class="option-label">
                                    <input type="radio" name="q5" value="wrong"> H√†m Arrow th√¥ng th∆∞·ªùng
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q5" value="wrong"> H√†m Callback
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q5" value="correct"> H√†m ƒë∆∞·ª£c ƒë√°nh d·∫•u v·ªõi t·ª´ kh√≥a `async`
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q5" value="wrong"> H√†m Constructor (kh·ªüi t·∫°o)
                                </label>
                            </div>
                        </div>

                        <button type="button" onclick="checkQuiz()" class="api-button" style="margin-top: 20px;">
                            Ki·ªÉm tra k·∫øt qu·∫£
                        </button>
                    </form>
                    <div id="quiz-feedback"></div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div
            style="text-align: center; margin-top: 50px; padding: 20px; color: #6b7280; border-top: 1px solid #e5e7eb;">
            <p>¬© 2026 H·ªçc L·∫≠p Tr√¨nh M·ªói Ng√†y - Day 13: Fetch API</p>
        </div>
    </div>

    <script src="../js/config.js"></script>
    <script src="../js/storage.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/quiz-handler.js"></script>

    <script>
        initQuiz('day13');
        // --- Demo 1: Random User ---
        async function fetchRandomUser() {
            const container = document.getElementById('userData');
            container.innerHTML = '<div class="loading"></div> ƒêang t·∫£i d·ªØ li·ªáu ng∆∞·ªùi d√πng...';

            try {
                const response = await fetch('https://randomuser.me/api/');
                if (!response.ok) throw new Error(`L·ªói: ${response.status}`);

                const data = await response.json();
                const user = data.results[0];

                container.innerHTML = `
                    <div class="data-card">
                        <img src="${user.picture.large}" class="user-avatar" alt="Avatar">
                        <h3>${user.name.title}. ${user.name.first} ${user.name.last}</h3>
                        <p><strong>üìß Email:</strong> ${user.email}</p>
                        <p><strong>üì± Phone:</strong> ${user.phone}</p>
                        <p><strong>üìç Location:</strong> ${user.location.city}, ${user.location.country}</p>
                    </div>
                `;
            } catch (error) {
                container.innerHTML = `<div class="error-message">‚ùå Kh√¥ng th·ªÉ t·∫£i user: ${error.message}</div>`;
            }
        }

        // --- Demo 2: Weather API ---
        async function fetchWeather() {
            const lat = document.getElementById('latitude').value.trim() || "21.0285"; // M·∫∑c ƒë·ªãnh H√† N·ªôi
            const lon = document.getElementById('longitude').value.trim() || "105.8542";
            const container = document.getElementById('weatherData');

            container.innerHTML = '<div class="loading"></div> ƒêang l·∫•y d·ªØ li·ªáu th·ªùi ti·∫øt...';

            try {
                const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`;
                const response = await fetch(url);
                if (!response.ok) throw new Error('Sai t·ªça ƒë·ªô ho·∫∑c l·ªói server');

                const data = await response.json();
                const weather = data.current_weather;

                container.innerHTML = `
                    <div class="data-card">
                        <div class="weather-icon">üå°Ô∏è</div>
                        <h3>Th·ªùi ti·∫øt t·∫°i t·ªça ƒë·ªô (${lat}, ${lon})</h3>
                        <p><strong>Nhi·ªát ƒë·ªô:</strong> ${weather.temperature}¬∞C</p>
                        <p><strong>T·ªëc ƒë·ªô gi√≥:</strong> ${weather.windspeed} km/h</p>
                        <p><strong>Th·ªùi ƒëi·ªÉm:</strong> ${new Date(weather.time).toLocaleString()}</p>
                    </div>
                `;
            } catch (error) {
                container.innerHTML = `<div class="error-message">‚ùå L·ªói: ${error.message}</div>`;
            }
        }

        // --- Demo 3: Random Joke ---
        async function fetchJoke() {
            const container = document.getElementById('jokeData');
            container.innerHTML = '<div class="loading"></div> ƒêang t√¨m chuy·ªán c∆∞·ªùi...';

            try {
                // Th√™m tham s·ªë cache bust ƒë·ªÉ tr√°nh API tr·∫£ v·ªÅ k·∫øt qu·∫£ c≈©
                const response = await fetch('https://official-joke-api.appspot.com/random_joke?nocache=' + Date.now());
                if (!response.ok) throw new Error('L·ªói l·∫•y d·ªØ li·ªáu');

                const joke = await response.json();

                container.innerHTML = `
                    <div class="data-card">
                        <h3 style="color: #764ba2;">üé≠ ${joke.type.toUpperCase()}</h3>
                        <p style="font-size: 1.1em; margin-bottom: 10px;"><strong>Setup:</strong> ${joke.setup}</p>
                        <p style="font-size: 1.2em; color: #10b981;"><strong>‚ûî ${joke.punchline}</strong></p>
                    </div>
                `;
            } catch (error) {
                container.innerHTML = `<div class="error-message">‚ùå L·ªói: ${error.message}</div>`;
            }
        }
    </script>
</body>

</html>