<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ng√†y 6: JavaScript Functions</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/lesson-style.css">
    <style>
        .function-demo {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
        }

        .function-demo h4 {
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .demo-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }

        .demo-input-group input {
            padding: 10px;
            border: none;
            border-radius: 6px;
            flex: 1;
            min-width: 150px;
        }

        .demo-input-group button {
            padding: 10px 20px;
            background: white;
            color: #667eea;
            border: none;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .demo-input-group button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .demo-output {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            min-height: 40px;
            font-family: monospace;
            font-size: 1.1em;
        }

        .function-syntax {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .syntax-card {
            background: #f3f4f6;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .syntax-card h5 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .arrow-flow {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: #f9fafb;
            border-radius: 10px;
        }

        .arrow-flow .step {
            display: inline-block;
            padding: 10px 20px;
            background: white;
            border-radius: 8px;
            margin: 0 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .arrow-flow .arrow {
            display: inline-block;
            margin: 0 10px;
            font-size: 1.5em;
            color: #667eea;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üìÖ Th√°ng 1 - Ng√†y 6</h1>
            <p>L√†m quen v·ªõi Functions - Kh·ªëi code c√≥ th·ªÉ t√°i s·ª≠ d·ª•ng</p>
        </div>

        <div class="content">
            <a href="../index.html" class="btn"
                style="display: inline-block; text-decoration: none; margin-bottom: 20px;">
                ‚¨ÖÔ∏è Quay l·∫°i L·ªô tr√¨nh
            </a>

            <!-- Ph·∫ßn 1: Function l√† g√¨? -->
            <div class="section">
                <div class="section-title">1. Function (H√†m) l√† g√¨?</div>
                <p>Function l√† m·ªôt <strong>kh·ªëi code c√≥ th·ªÉ t√°i s·ª≠ d·ª•ng</strong> ƒë·ªÉ th·ª±c hi·ªán m·ªôt nhi·ªám v·ª• c·ª• th·ªÉ. Thay v√¨ vi·∫øt l·∫°i code nhi·ªÅu l·∫ßn, b·∫°n ch·ªâ c·∫ßn g·ªçi function.</p>

                <div class="arrow-flow">
                    <div class="step">Input (Tham s·ªë)</div>
                    <span class="arrow">‚Üí</span>
                    <div class="step">Function x·ª≠ l√Ω</div>
                    <span class="arrow">‚Üí</span>
                    <div class="step">Output (K·∫øt qu·∫£)</div>
                </div>

                <div class="info-box">
                    <strong>üéØ T·∫°i sao d√πng Functions?</strong><br>
                    ‚Ä¢ Tr√°nh l·∫∑p code (DRY - Don't Repeat Yourself)<br>
                    ‚Ä¢ Code d·ªÖ ƒë·ªçc, d·ªÖ b·∫£o tr√¨ h∆°n<br>
                    ‚Ä¢ C√≥ th·ªÉ t√°i s·ª≠ d·ª•ng nhi·ªÅu l·∫ßn<br>
                    ‚Ä¢ Chia nh·ªè v·∫•n ƒë·ªÅ ph·ª©c t·∫°p th√†nh c√°c ph·∫ßn ƒë∆°n gi·∫£n
                </div>
            </div>

            <!-- Ph·∫ßn 2: C√∫ ph√°p khai b√°o -->
            <div class="section">
                <div class="section-title">2. C√°ch khai b√°o Function</div>
                
                <div class="function-syntax">
                    <div class="syntax-card">
                        <h5>‚úÖ Function Declaration (Khuy·∫øn kh√≠ch)</h5>
                        <div class="code-block">
function sayHello(name) {
    return "Xin ch√†o " + name;
}

sayHello("Minh"); // "Xin ch√†o Minh"
                        </div>
                    </div>

                    <div class="syntax-card">
                        <h5>üÜï Arrow Function (ES6+)</h5>
                        <div class="code-block">
const sayHello = (name) => {
    return "Xin ch√†o " + name;
};

// Ng·∫Øn g·ªçn h∆°n:
const greet = name => "Xin ch√†o " + name;
                        </div>
                    </div>
                </div>

                <div class="concept-card">
                    <h4 style="margin-bottom: 15px;">üìù C·∫•u tr√∫c c·ªßa Function:</h4>
                    <div class="code-block">
function <span style="color: #10b981;">tenHam</span>(<span style="color: #f59e0b;">thamSo1, thamSo2</span>) {
    // Th√¢n h√†m - code th·ª±c thi
    let ketQua = thamSo1 + thamSo2;
    <span style="color: #ef4444;">return</span> ketQua; // Tr·∫£ v·ªÅ k·∫øt qu·∫£
}

// G·ªçi function
let tong = <span style="color: #10b981;">tenHam</span>(<span style="color: #f59e0b;">5, 3</span>); // tong = 8
                    </div>
                </div>
            </div>

            <!-- Ph·∫ßn 3: Parameters & Return -->
            <div class="section">
                <div class="section-title">3. Parameters (Tham s·ªë) & Return (Tr·∫£ v·ªÅ)</div>
                
                <div class="code-comparison" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h4 style="color: #667eea;">C√≥ tham s·ªë, c√≥ return</h4>
                        <div class="code-block">
function cong(a, b) {
    return a + b;
}

let tong = cong(5, 3);
console.log(tong); // 8
                        </div>
                    </div>

                    <div>
                        <h4 style="color: #667eea;">Kh√¥ng tham s·ªë, kh√¥ng return</h4>
                        <div class="code-block">
function chaoMoiNguoi() {
    console.log("Xin ch√†o!");
}

chaoMoiNguoi(); // In ra: Xin ch√†o!
                        </div>
                    </div>
                </div>

                <div class="warning-box">
                    <strong>‚ö†Ô∏è L∆∞u √Ω quan tr·ªçng:</strong><br>
                    ‚Ä¢ Khi function g·∫∑p <code>return</code>, n√≥ s·∫Ω D·ª™NG ngay l·∫≠p t·ª©c<br>
                    ‚Ä¢ Code sau <code>return</code> s·∫Ω KH√îNG ƒë∆∞·ª£c th·ª±c thi<br>
                    ‚Ä¢ Function kh√¥ng c√≥ <code>return</code> s·∫Ω tr·∫£ v·ªÅ <code>undefined</code>
                </div>
            </div>

            <!-- Ph·∫ßn 4: Th·ª≠ nghi·ªám th·ª±c t·∫ø -->
            <div class="section">
                <div class="section-title">üíª Th·ª≠ nghi·ªám Functions</div>
                
                <div class="function-demo">
                    <h4>üßÆ M√°y t√≠nh c·ªông tr·ª´ nh√¢n chia</h4>
                    <div class="demo-input-group">
                        <input type="number" id="num1" placeholder="S·ªë th·ª© nh·∫•t" value="10">
                        <input type="number" id="num2" placeholder="S·ªë th·ª© hai" value="5">
                        <button onclick="calculate('add')">‚ûï C·ªông</button>
                        <button onclick="calculate('subtract')">‚ûñ Tr·ª´</button>
                        <button onclick="calculate('multiply')">‚úñÔ∏è Nh√¢n</button>
                        <button onclick="calculate('divide')">‚ûó Chia</button>
                    </div>
                    <div class="demo-output" id="calcResult">K·∫øt qu·∫£ s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y</div>
                </div>

                <div class="function-demo">
                    <h4>üìè T√≠nh di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t</h4>
                    <div class="demo-input-group">
                        <input type="number" id="width" placeholder="Chi·ªÅu d√†i" value="5">
                        <input type="number" id="height" placeholder="Chi·ªÅu r·ªông" value="3">
                        <button onclick="calculateArea()">T√≠nh di·ªán t√≠ch</button>
                    </div>
                    <div class="demo-output" id="areaResult">Nh·∫•n n√∫t ƒë·ªÉ t√≠nh</div>
                </div>

                <details style="margin-top: 15px; background: #f9fafb; padding: 15px; border-radius: 8px;">
                    <summary style="cursor: pointer; font-weight: bold; color: #667eea;">üìñ Xem code c·ªßa demo</summary>
                    <div class="code-block" style="margin-top: 10px;">
// M√°y t√≠nh
function add(a, b) {
    return a + b;
}

function subtract(a, b) {
    return a - b;
}

function multiply(a, b) {
    return a * b;
}

function divide(a, b) {
    if (b === 0) return "Kh√¥ng th·ªÉ chia cho 0!";
    return a / b;
}

// T√≠nh di·ªán t√≠ch
function calculateRectangleArea(width, height) {
    return width * height;
}
                    </div>
                </details>
            </div>

            <!-- Ph·∫ßn 5: Default Parameters -->
            <div class="section">
                <div class="section-title">5. Default Parameters (Tham s·ªë m·∫∑c ƒë·ªãnh)</div>
                <p>B·∫°n c√≥ th·ªÉ ƒë·∫∑t gi√° tr·ªã m·∫∑c ƒë·ªãnh cho tham s·ªë, n·∫øu kh√¥ng truy·ªÅn v√†o th√¨ s·∫Ω d√πng gi√° tr·ªã n√†y:</p>

                <div class="code-block">
function chao(ten = "B·∫°n") {
    return "Xin ch√†o " + ten + "!";
}

console.log(chao("Minh"));  // "Xin ch√†o Minh!"
console.log(chao());        // "Xin ch√†o B·∫°n!" (d√πng gi√° tr·ªã m·∫∑c ƒë·ªãnh)
                </div>

                <div class="code-block">
function tinhTong(a, b = 0) {
    return a + b;
}

console.log(tinhTong(5, 3));  // 8
console.log(tinhTong(5));     // 5 (b = 0)
                </div>
            </div>

            <!-- B√†i t·∫≠p v·ªÅ nh√† -->
            <div class="section">
                <div class="section-title">üéØ B√†i t·∫≠p v·ªÅ nh√†</div>
                <div class="project-card">
                    <div class="project-header">
                        <div class="project-title">T·∫°o "B·ªô c√¥ng c·ª• t√≠nh to√°n" v·ªõi Functions</div>
                    </div>
                    <p style="margin-top: 10px; line-height: 1.6;">
                        T·∫°o m·ªôt file <code>calculator.html</code> v·ªõi c√°c function sau:
                    </p>
                    <ul style="margin: 10px 0 10px 20px; color: #4b5563;">
                        <li><code>tinhBinhPhuong(n)</code> - T√≠nh b√¨nh ph∆∞∆°ng c·ªßa n</li>
                        <li><code>laMauChan(n)</code> - Ki·ªÉm tra n c√≥ ph·∫£i s·ªë ch·∫µn kh√¥ng (return true/false)</li>
                        <li><code>chuyenDoiNhietDo(celsius)</code> - Chuy·ªÉn ƒë·ªô C sang ƒë·ªô F (c√¥ng th·ª©c: F = C √ó 9/5 + 32)</li>
                        <li><code>tinhTienTip(tienAn, phanTram = 10)</code> - T√≠nh ti·ªÅn tip (m·∫∑c ƒë·ªãnh 10%)</li>
                    </ul>
                    <p style="margin-top: 10px; color: #6b7280;">
                        <strong>Bonus:</strong> T·∫°o giao di·ªán HTML v·ªõi input v√† button ƒë·ªÉ test c√°c function!
                    </p>
                </div>
            </div>

            <!-- Quiz -->
            <div class="section">
                <div class="section-title">üß† Ki·ªÉm tra ki·∫øn th·ª©c</div>
                <div class="quiz-container">
                    <form id="quizForm">
                        <div class="question-item">
                            <div class="question-text">C√¢u 1: Function d√πng ƒë·ªÉ l√†m g√¨?</div>
                            <div class="options-list">
                                <label class="option-label">
                                    <input type="radio" name="q1" value="correct"> T·∫°o kh·ªëi code c√≥ th·ªÉ t√°i s·ª≠ d·ª•ng
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q1" value="wrong"> Ch·ªâ ƒë·ªÉ trang tr√≠ code
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q1" value="wrong"> Kh√¥ng c√≥ t√°c d·ª•ng g√¨
                                </label>
                            </div>
                        </div>

                        <div class="question-item">
                            <div class="question-text">C√¢u 2: T·ª´ kh√≥a n√†o d√πng ƒë·ªÉ tr·∫£ v·ªÅ gi√° tr·ªã t·ª´ function?</div>
                            <div class="options-list">
                                <label class="option-label">
                                    <input type="radio" name="q2" value="wrong"> give
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q2" value="correct"> return
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q2" value="wrong"> result
                                </label>
                            </div>
                        </div>

                        <div class="question-item">
                            <div class="question-text">C√¢u 3: Code sau <code>return</code> trong function s·∫Ω nh∆∞ th·∫ø n√†o?</div>
                            <div class="options-list">
                                <label class="option-label">
                                    <input type="radio" name="q3" value="correct"> Kh√¥ng ƒë∆∞·ª£c th·ª±c thi (b·ªã b·ªè qua)
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q3" value="wrong"> V·∫´n ch·∫°y b√¨nh th∆∞·ªùng
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q3" value="wrong"> G√¢y l·ªói
                                </label>
                            </div>
                        </div>

                        <div class="question-item">
                            <div class="question-text">C√¢u 4: C√∫ ph√°p n√†o ƒë√∫ng ƒë·ªÉ khai b√°o function?</div>
                            <div class="options-list">
                                <label class="option-label">
                                    <input type="radio" name="q4" value="correct"> function tenHam() { }
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q4" value="wrong"> func tenHam() { }
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q4" value="wrong"> def tenHam() { }
                                </label>
                            </div>
                        </div>

                        <div class="question-item">
                            <div class="question-text">C√¢u 5: <code>function add(a, b = 5) { return a + b; }</code> - Khi g·ªçi <code>add(10)</code>, k·∫øt qu·∫£ l√†?</div>
                            <div class="options-list">
                                <label class="option-label">
                                    <input type="radio" name="q5" value="wrong"> 10
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q5" value="correct"> 15
                                </label>
                                <label class="option-label">
                                    <input type="radio" name="q5" value="wrong"> L·ªói v√¨ thi·∫øu tham s·ªë
                                </label>
                            </div>
                        </div>

                        <button type="button" class="btn" onclick="checkQuiz()">Ki·ªÉm tra ƒë√°p √°n</button>
                    </form>
                    <div id="quiz-feedback"></div>
                </div>
            </div>

            <!-- Footer Actions -->
            <div class="actions">
                <button class="btn" onclick="window.location.href='day5.html'">‚¨ÖÔ∏è Quay l·∫°i ng√†y 5</button>
                <button id="completeBtn" class="btn" style="opacity: 0.5; pointer-events: none;"
                    onclick="completeLesson()">‚úÖ Ho√†n th√†nh b√†i h·ªçc</button>
                <p style="font-size: 0.9em; color: #666; margin-top: 5px;">(H√£y l√†m ƒë√∫ng Quiz ƒë·ªÉ m·ªü kh√≥a n√∫t ho√†n th√†nh)</p>
            </div>
        </div>
    </div>

    <!-- Load external scripts first -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="../js/config.js"></script>
    <script src="../js/storage.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/quiz-handler.js"></script>

    <script>
        initQuiz('day6');
        // Demo functions
        function calculate(operation) {
            const num1 = parseFloat(document.getElementById('num1').value);
            const num2 = parseFloat(document.getElementById('num2').value);
            const resultDiv = document.getElementById('calcResult');

            if (isNaN(num1) || isNaN(num2)) {
                resultDiv.textContent = "‚ö†Ô∏è Vui l√≤ng nh·∫≠p s·ªë h·ª£p l·ªá!";
                return;
            }

            let result;
            let symbol;

            switch(operation) {
                case 'add':
                    result = num1 + num2;
                    symbol = '+';
                    break;
                case 'subtract':
                    result = num1 - num2;
                    symbol = '-';
                    break;
                case 'multiply':
                    result = num1 * num2;
                    symbol = '√ó';
                    break;
                case 'divide':
                    if (num2 === 0) {
                        resultDiv.textContent = "‚ùå Kh√¥ng th·ªÉ chia cho 0!";
                        return;
                    }
                    result = num1 / num2;
                    symbol = '√∑';
                    break;
            }

            resultDiv.textContent = `${num1} ${symbol} ${num2} = ${result}`;
        }

        function calculateArea() {
            const width = parseFloat(document.getElementById('width').value);
            const height = parseFloat(document.getElementById('height').value);
            const resultDiv = document.getElementById('areaResult');

            if (isNaN(width) || isNaN(height)) {
                resultDiv.textContent = "‚ö†Ô∏è Vui l√≤ng nh·∫≠p s·ªë h·ª£p l·ªá!";
                return;
            }

            if (width <= 0 || height <= 0) {
                resultDiv.textContent = "‚ùå Chi·ªÅu d√†i v√† chi·ªÅu r·ªông ph·∫£i > 0!";
                return;
            }

            const area = width * height;
            const perimeter = 2 * (width + height);
            
            resultDiv.innerHTML = `
                üìê Di·ªán t√≠ch: <strong>${area} ƒëvdt</strong><br>
                üìè Chu vi: <strong>${perimeter} ƒëvdt</strong>
            `;
        }
    </script>
</body>

</html>